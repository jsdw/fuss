pub mod ops;
pub mod casting;
pub mod import;
pub mod blocks;
pub mod colour;

use types::*;

fn get_prelude() -> Scope {
    scope!{

        "+" => function(ops::add);
        "-" => function(ops::subtract);
        "/" => function(ops::divide);
        "*" => function(ops::multiply);
        "^" => function(ops::pow);
        "!" => function(ops::not);
        "==" => function(ops::equal);
        "<=" => function(ops::less_than_or_equal);
        ">=" => function(ops::greater_than_or_equal);
        "<" => function(ops::less_than);
        ">" => function(ops::greater_than);
        "!=" => function(ops::not_equal);
        "&&" => function(ops::boolean_and);
        "||" => function(ops::boolean_or);
        "to_boolean" => function(casting::boolean);
        "to_string" => function(casting::string);
        "import" => function(import::import);
        "merge" => function(blocks::merge);
        "rgba" => function(colour::rgba);
        "rgb" => function(colour::rgba);
        "hsla" => function(colour::hsla);
        "hsl" => function(colour::hsla);

        // CSS Level 4 colours by name:
        "aliceblue" => colour_rgb_u8(240,248,255);
        "antiquewhite" => colour_rgb_u8(250,235,215);
        "aqua" => colour_rgb_u8(0,255,255);
        "aquamarine" => colour_rgb_u8(127,255,212);
        "azure" => colour_rgb_u8(240,255,255);
        "beige" => colour_rgb_u8(245,245,220);
        "bisque" => colour_rgb_u8(255,228,196);
        "black" => colour_rgb_u8(0,0,0);
        "blanchedalmond" => colour_rgb_u8(255,235,205);
        "blue" => colour_rgb_u8(0,0,255);
        "blueviolet" => colour_rgb_u8(138,43,226);
        "brown" => colour_rgb_u8(165,42,42);
        "burlywood" => colour_rgb_u8(222,184,135);
        "cadetblue" => colour_rgb_u8(95,158,160);
        "chartreuse" => colour_rgb_u8(127,255,0);
        "chocolate" => colour_rgb_u8(210,105,30);
        "coral" => colour_rgb_u8(255,127,80);
        "cornflowerblue" => colour_rgb_u8(100,149,237);
        "cornsilk" => colour_rgb_u8(255,248,220);
        "crimson" => colour_rgb_u8(220,20,60);
        "cyan" => colour_rgb_u8(0,255,255);
        "darkblue" => colour_rgb_u8(0,0,139);
        "darkcyan" => colour_rgb_u8(0,139,139);
        "darkgoldenrod" => colour_rgb_u8(184,134,11);
        "darkgray" => colour_rgb_u8(169,169,169);
        "darkgreen" => colour_rgb_u8(0,100,0);
        "darkgrey" => colour_rgb_u8(169,169,169);
        "darkkhaki" => colour_rgb_u8(189,183,107);
        "darkmagenta" => colour_rgb_u8(139,0,139);
        "darkolivegreen" => colour_rgb_u8(85,107,47);
        "darkorange" => colour_rgb_u8(255,140,0);
        "darkorchid" => colour_rgb_u8(153,50,204);
        "darkred" => colour_rgb_u8(139,0,0);
        "darksalmon" => colour_rgb_u8(233,150,122);
        "darkseagreen" => colour_rgb_u8(143,188,143);
        "darkslateblue" => colour_rgb_u8(72,61,139);
        "darkslategray" => colour_rgb_u8(47,79,79);
        "darkslategrey" => colour_rgb_u8(47,79,79);
        "darkturquoise" => colour_rgb_u8(0,206,209);
        "darkviolet" => colour_rgb_u8(148,0,211);
        "deeppink" => colour_rgb_u8(255,20,147);
        "deepskyblue" => colour_rgb_u8(0,191,255);
        "dimgray" => colour_rgb_u8(105,105,105);
        "dimgrey" => colour_rgb_u8(105,105,105);
        "dodgerblue" => colour_rgb_u8(30,144,255);
        "firebrick" => colour_rgb_u8(178,34,34);
        "floralwhite" => colour_rgb_u8(255,250,240);
        "forestgreen" => colour_rgb_u8(34,139,34);
        "fuchsia" => colour_rgb_u8(255,0,255);
        "gainsboro" => colour_rgb_u8(220,220,220);
        "ghostwhite" => colour_rgb_u8(248,248,255);
        "gold" => colour_rgb_u8(255,215,0);
        "goldenrod" => colour_rgb_u8(218,165,32);
        "gray" => colour_rgb_u8(128,128,128);
        "green" => colour_rgb_u8(0,128,0);
        "greenyellow" => colour_rgb_u8(173,255,47);
        "grey" => colour_rgb_u8(128,128,128);
        "honeydew" => colour_rgb_u8(240,255,240);
        "hotpink" => colour_rgb_u8(255,105,180);
        "indianred" => colour_rgb_u8(205,92,92);
        "indigo" => colour_rgb_u8(75,0,130);
        "ivory" => colour_rgb_u8(255,255,240);
        "khaki" => colour_rgb_u8(240,230,140);
        "lavender" => colour_rgb_u8(230,230,250);
        "lavenderblush" => colour_rgb_u8(255,240,245);
        "lawngreen" => colour_rgb_u8(124,252,0);
        "lemonchiffon" => colour_rgb_u8(255,250,205);
        "lightblue" => colour_rgb_u8(173,216,230);
        "lightcoral" => colour_rgb_u8(240,128,128);
        "lightcyan" => colour_rgb_u8(224,255,255);
        "lightgoldenrodyellow" => colour_rgb_u8(250,250,210);
        "lightgray" => colour_rgb_u8(211,211,211);
        "lightgreen" => colour_rgb_u8(144,238,144);
        "lightgrey" => colour_rgb_u8(211,211,211);
        "lightpink" => colour_rgb_u8(255,182,193);
        "lightsalmon" => colour_rgb_u8(255,160,122);
        "lightseagreen" => colour_rgb_u8(32,178,170);
        "lightskyblue" => colour_rgb_u8(135,206,250);
        "lightslategray" => colour_rgb_u8(119,136,153);
        "lightslategrey" => colour_rgb_u8(119,136,153);
        "lightsteelblue" => colour_rgb_u8(176,196,222);
        "lightyellow" => colour_rgb_u8(255,255,224);
        "lime" => colour_rgb_u8(0,255,0);
        "limegreen" => colour_rgb_u8(50,205,50);
        "linen" => colour_rgb_u8(250,240,230);
        "magenta" => colour_rgb_u8(255,0,255);
        "maroon" => colour_rgb_u8(128,0,0);
        "mediumaquamarine" => colour_rgb_u8(102,205,170);
        "mediumblue" => colour_rgb_u8(0,0,205);
        "mediumorchid" => colour_rgb_u8(186,85,211);
        "mediumpurple" => colour_rgb_u8(147,112,219);
        "mediumseagreen" => colour_rgb_u8(60,179,113);
        "mediumslateblue" => colour_rgb_u8(123,104,238);
        "mediumspringgreen" => colour_rgb_u8(0,250,154);
        "mediumturquoise" => colour_rgb_u8(72,209,204);
        "mediumvioletred" => colour_rgb_u8(199,21,133);
        "midnightblue" => colour_rgb_u8(25,25,112);
        "mintcream" => colour_rgb_u8(245,255,250);
        "mistyrose" => colour_rgb_u8(255,228,225);
        "moccasin" => colour_rgb_u8(255,228,181);
        "navajowhite" => colour_rgb_u8(255,222,173);
        "navy" => colour_rgb_u8(0,0,128);
        "oldlace" => colour_rgb_u8(253,245,230);
        "olive" => colour_rgb_u8(128,128,0);
        "olivedrab" => colour_rgb_u8(107,142,35);
        "orange" => colour_rgb_u8(255,165,0);
        "orangered" => colour_rgb_u8(255,69,0);
        "orchid" => colour_rgb_u8(218,112,214);
        "palegoldenrod" => colour_rgb_u8(238,232,170);
        "palegreen" => colour_rgb_u8(152,251,152);
        "paleturquoise" => colour_rgb_u8(175,238,238);
        "palevioletred" => colour_rgb_u8(219,112,147);
        "papayawhip" => colour_rgb_u8(255,239,213);
        "peachpuff" => colour_rgb_u8(255,218,185);
        "peru" => colour_rgb_u8(205,133,63);
        "pink" => colour_rgb_u8(255,192,203);
        "plum" => colour_rgb_u8(221,160,221);
        "powderblue" => colour_rgb_u8(176,224,230);
        "purple" => colour_rgb_u8(128,0,128);
        "rebeccapurple" => colour_rgb_u8(102,51,153);
        "red" => colour_rgb_u8(255,0,0);
        "rosybrown" => colour_rgb_u8(188,143,143);
        "royalblue" => colour_rgb_u8(65,105,225);
        "saddlebrown" => colour_rgb_u8(139,69,19);
        "salmon" => colour_rgb_u8(250,128,114);
        "sandybrown" => colour_rgb_u8(244,164,96);
        "seagreen" => colour_rgb_u8(46,139,87);
        "seashell" => colour_rgb_u8(255,245,238);
        "sienna" => colour_rgb_u8(160,82,45);
        "silver" => colour_rgb_u8(192,192,192);
        "skyblue" => colour_rgb_u8(135,206,235);
        "slateblue" => colour_rgb_u8(106,90,205);
        "slategray" => colour_rgb_u8(112,128,144);
        "slategrey" => colour_rgb_u8(112,128,144);
        "snow" => colour_rgb_u8(255,250,250);
        "springgreen" => colour_rgb_u8(0,255,127);
        "steelblue" => colour_rgb_u8(70,130,180);
        "tan" => colour_rgb_u8(210,180,140);
        "teal" => colour_rgb_u8(0,128,128);
        "thistle" => colour_rgb_u8(216,191,216);
        "tomato" => colour_rgb_u8(255,99,71);
        "turquoise" => colour_rgb_u8(64,224,208);
        "violet" => colour_rgb_u8(238,130,238);
        "wheat" => colour_rgb_u8(245,222,179);
        "white" => colour_rgb_u8(255,255,255);
        "whitesmoke" => colour_rgb_u8(245,245,245);
        "yellow" => colour_rgb_u8(255,255,0);
        "yellowgreen" => colour_rgb_u8(154,205,50)

    }
}

fn colour_rgb_u8(r: u8, g: u8, b: u8) -> EvaluatedExpr {
    EvaluatedExpr::Colour(Colour::RGB_u8(r,g,b))
}
fn function(f: fn(&Vec<EvaluatedExpression>,&Context) -> PrimRes) -> EvaluatedExpr {
    EvaluatedExpr::PrimFunc(PrimFunc(f))
}